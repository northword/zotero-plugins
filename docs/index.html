<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>Zotero 插件商店 - Zotero 中文社区</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="description"
      content="本站点是由 Zotero 中文社区整理的 Zotero 插件下载汇总导航网站。网站后台定期收集 GitHub 上最新的 Zotero 插件信息并汇总，方便国内用户检索和下载。"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <link rel="icon" href="https://avatars.githubusercontent.com/u/110372206" />
    <link rel="stylesheet" href="//unpkg.com/docsify@4/lib/themes/vue.css" />
    <style type="text/css">
      table > thead > tr > th:nth-child(7) {
        min-width: 140px;
      }
      #myInput {
        min-width: 400px;
        height: 30px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="https://zotero-chinese.com">Zotero 中文小组首页</a>
      <a href="https://zotero-chinese.com/user-guide/">Zotero 百科全书</a>
      <a href="#/">Zotero 插件商店</a>
      <a href="charts.html">插件排行榜</a>
      <a href="https://github.com/redleafnew/Chinese-STD-GB-T-7714-related-csl/"
        >中文 CSL 样式</a
      >
    </nav>
    <div id="app"></div>
    <script>
      window.$docsify = {
        hideSidebar: true,
        name: "Zotero 中文",
        repo: "https://github.com/northword/zotero-plugins",
      };
      // Plugin
      function concatRow(hook, vm) {
        hook.doneEach(function () {
          let rows = document.querySelectorAll("table > tbody > tr");
          let visibleRowCount = 0; // 用于追踪可见的行数

          for (let i = 0; i < rows.length; i++) {
            let currentRow = rows[i];
            let cells = currentRow.querySelectorAll("td");

            if (!cells[0].innerText) {
              currentRow.style.backgroundColor =
                rows[i - 1].style.backgroundColor;
              for (let j = 0; j < cells.length; j++) {
                if (!cells[j].innerText) {
                  cells[j].setAttribute("hidden", "hidden");
                  cells[j].style.backgroundColor =
                    rows[i - 1].style.backgroundColor;
                  rows[i - 1]
                    .querySelectorAll("td")
                    [j].setAttribute("rowspan", "2");
                }
              }
              currentRow.className = "r" + (visibleRowCount - 1);
            } else {
              currentRow.className = "r" + visibleRowCount;
              currentRow.style.backgroundColor =
                visibleRowCount % 2 === 0 ? "white" : "#f8f8f8";
              visibleRowCount++;
            }
          }
        });
      }

      function myFunction() {
        // Declare variables
        let input = document.getElementById("myInput");
        let filter = input.value.toUpperCase();
        let table = document.getElementsByTagName("table")[0];
        let trs = table.querySelectorAll(" tbody > tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < trs.length; i++) {
          td = trs[i].getElementsByTagName("td")[0];  // plugin name
          desc = trs[i].getElementsByTagName("td")[1];  // plugin description
          author = trs[i].getElementsByTagName("td")[2];  // plugin author
          let className = trs[i].className;
          if (td.innerText) {
            txtValue = td.textContent + " " + desc.textContent + " " + author.textContent;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              console.log(className + "Yes");
              for (let ele of document.getElementsByClassName(className)) {
                  ele.style.display = "";
                };
            } else {
              console.log(className + "No");
              for (let ele of document.getElementsByClassName(className)) {
                  ele.style.display = "none";
                };
            }
          }
        }
      }

      // Add to plugin array
      $docsify.plugins = [].concat(concatRow, $docsify.plugins);
    </script>
    <!-- Docsify v4 -->
    <script src="//unpkg.com/docsify@4"></script>
  </body>
</html>
